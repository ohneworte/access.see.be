/* access.see.be - Accessibility-Library for Prototype, www.access-see-be.net, Version 0.5
 * Copyright (C) 2008  diamonddogs web consulting gesmbh, www.diamonddogs.cc
 *  
 * This program is free software; you can redistribute it and/or
 * modify it under the terms of the GNU General Public License
 * as published by the Free Software Foundation; either version 2
 * of the License, or (at your option) any later version.
 * 
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 * 
 * You should have received a copy of the GNU General Public License
 * along with this program; if not, write to the Free Software
 * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
 *  
 * Component: aria.js
 * Loading mechanism based on script.aculo.us <http://script.aculo.us/>
 *
 *--------------------------------------------------------------------------*/

widgetHash=$H({textbox:0,checkbox:0,radio:0,button:0,slider:0,radiogroup:0,tab:0,tablist:0,tabpanel:0,tree:0,treeitem:0,group:0,menubar:0,menuitem:0,listbox:0,combobox:0,option:0});var Aria={version:"0.5",delimiter:"asb",initialize:function(){Aria.enhancePrototype();if((typeof Prototype=="undefined")||(typeof Element=="undefined")||(typeof Element.Methods=="undefined")||parseFloat(Prototype.Version.split(".").first()+"."+Prototype.Version.split(".")[1])<1.6){throw ("access.see.be requires the Prototype JavaScript framework >= 1.6.0")}$A($$("script")).findAll(function(A){return(A.src&&A.src.match(/aria\.js(\?.*)?$/))}).each(function(B){ariaPath=B.src.substring(0,B.src.indexOf("aria.js"));ariaImagePath=ariaPath+"../images/aria/";var A=B.src.match(/\?.*load=([a-z,]*)/);(A?A[1]:"ariaLibraryStyles,ariaMyStyles").split(",").each(function(C){Aria.require(ariaPath+"../stylesheets/"+C+".css","style")});(A?A[1]:"ariaCookies,ariaAjaxRequests,ariaNamespaces,ariaFlashObjects,ariaWidgets,ariaMyFunctions").split(",").each(function(C){Aria.require(ariaPath+C+".js","script")})})},supported:function(){var A=this.supports=new Object();A.ff=new Object();A.ff[2]=navigator.userAgent.include("Firefox/2");A.ff[3]=navigator.userAgent.include("Firefox/3");A.ie=(navigator.appName=="Microsoft Internet Explorer"&&navigator.appVersion.indexOf("8.0")>0)?true:false;A.opera=(navigator.appName=="Opera"&&navigator.appVersion.indexOf("9.5")==0)?true:false;A.viewInAllBrowsers=false;A.developerMode=false;var B=new Element("div");B.update("&nbsp;<style>head {color:red;}</style>");$$("head").first().insert({top:B.innerHTML});A.css=$$("head").first().getStyle("color").include("rgb(255, 0, 0)")||$$("head").first().getStyle("color").include("red")||$$("head").first().getStyle("color").include("#ff000");$$("style").first().remove();A.flash=false;for(n=0;n<navigator.plugins.length;n++){if(navigator.plugins[n].name.toLowerCase().indexOf("shockwave flash")!=-1){A.flash=true}}if(window.ActiveXObject){try{if(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")){A.flash=true}}catch(C){}}if(typeof (window.ariaSettings)=="undefined"?false:true){Object.keys(ariaSettings).each(function(D){A[D]=ariaSettings[D]}.bind(this))}return A.viewInAllBrowsers?true:(A.ff[2]||A.ff[3]||A.ie||A.opera)&&A.css},require:function(C,E,G){var F=arguments.callee;if(!("queue" in F)){F.queue={}}var A=F.queue;if(C in A){if(G){if(A[C]){A[C].push(G)}else{G()}}return }A[C]=G?[G]:[];switch(E){case"script":var B=Element.extend(new Element("script",{type:"text/javascript",src:C}));B.onload=B.onreadystatechange=function(){if(B.readyState&&B.readyState!="loaded"&&B.readyState!="complete"){return }B.onreadystatechange=B.onload=null;while(A[C].length){A[C].shift()()}A[C]=null};break;case"style":var D=Element.extend(new Element("link",{type:"text/css",rel:"stylesheet",href:C}));D.onload=D.onreadystatechange=function(){if(D.readyState&&D.readyState!="loaded"&&D.readyState!="complete"){return }D.onreadystatechange=D.onload=null;while(A[C].length){A[C].shift()()}A[C]=null}}$$("head").first().appendChild(Object.isUndefined(B)?D:B)},enhancePrototype:function(){Object.extend(Array.prototype,{wrap:function(D,A){var B=this.clone(),C=B.shift();D=C.wrap(D,A);B.each(function(E){D.appendChild(E)});return D}});Object.extend(Number.prototype,{decc:function(A){return this-1}});Object.extend(String.prototype,{getAriaName:function(){return"aria"+this.capitalize()+"_"+widgetHash.get(this)},splitForID:function(){return parseInt(this.split("_").last())}});Object.extend(Object,{isEmpty:function(A){return A==""},isNull:function(A){return A==null},parseSettings:function(C,B,D){Object.keys(B).each(function(E){C[E]=B[E]}.bind(this));if(!Object.isUndefined(D["class"])){if(D["class"].include("[")){var A=new RegExp(/\[([^\]]*)\]/).exec(D["class"]);A.last().split(",").each(function(F){var E=F.strip().replace("'",new String()).replace('"',new String()).split(":");C[E.first()]=E.last()}.bind(this));D["class"]=D["class"].replace(A.first(),new String()).strip()}}}});Object.extend(Event,{KEY_SPACE:32,isLeftMouse:function(A){return A.type.include("click")&&A.button==0?true:false},isSpaceKey:function(A){return A.type.include("keydown")&&A.keyCode==Event.KEY_SPACE?true:false},isLeftKey:function(A){return A.type.include("keydown")&&A.keyCode==Event.KEY_LEFT?true:false},isRightKey:function(A){return A.type.include("keydown")&&A.keyCode==Event.KEY_RIGHT?true:false},isUpKey:function(A){return A.type.include("keydown")&&A.keyCode==Event.KEY_UP?true:false},isDownKey:function(A){return A.type.include("keydown")&&A.keyCode==Event.KEY_DOWN?true:false},isFocused:function(A){return A.type.include("focus")?true:false},isMouseuped:function(A){return A.type.include("mouseup")?true:false}});Element.addMethods({addClassNameExt:function(B,D){var A=Object.keys(D).first();var C=Object.values(D).first();if(!(B=$(B))){return }if(!B.hasClassName(C)){switch(A){case"top":B.className=C+(B.className?" ":new String())+B.className;break;case"bottom":B.className+=(B.className?" ":new String())+C;break}}return B},getStyles:function(A){A=$(A);return $A(A.style).inject({},function(C,B){C[B.camelize()]=A.getStyle(B);return C})},isVisible:function(A){var B=true;A.ancestors().each(function(C){if(!C.visible()){B=false}}.bind(this));return B},removeFurtherElements:function(A){if(!Object.isNull(A.next())){while(A.next().tagName.toLowerCase().include("br")){A.next().remove()}}},changeClassName:function(C,A,B){$(C).removeClassName(B);$(C).addClassNameExt({bottom:A})},getElementsByAttribute:function(C,D,F,B,A){var E=$A();switch(D){case"for":D="htmlFor";break}C.descendants().each(function(G){if(typeof G[D]=="string"&&G[D]==F){E.push(G)}else{if(typeof G[D]=="boolean"&&G[D].toString()==F){E.push(G)}}}.bind(this));return E},getElementsAttributes:function(B,C){var A=new Object();C.each(function(D){switch(D){case"style":A[D]=new Object();if(!Object.isNull(B.readAttribute(D))){B.readAttribute(D).split(";").each(function(E){if(!E.empty()){properties=E.split(":");A[D][properties.first().strip().camelize()]=properties.last().strip()}}.bind(this))}break;case"class":A[D]=B.className;break;default:A[D]=B.readAttribute(D)}}.bind(this));return A},cloneAttributes:function(C,D,B){var A=D.getElementsAttributes(B);Object.keys(A).each(function(E){switch(E){case"style":C.setStyle(D.getStyles());break;case"class":C.className=D.className.split("asb").first();break;default:C[E]=D.readAttribute(E)}}.bind(this))}})}};Aria.supported()?Aria.initialize():null;if(Aria.supports.ie){(function(){var A=this.Element;this.Element=function(D,C){C=C||{};D=D.toLowerCase();var B=Element.cache;if(C.name){D="<"+D+' name="'+C.name+'">';delete C.name;return Element.writeAttribute(document.createElement(D),C)}if(C["class"]){D="<"+D+' class="'+C["class"]+'">';delete C["class"];return Element.writeAttribute(document.createElement(D),C)}if(!B[D]){B[D]=Element.extend(document.createElement(D))}return Element.writeAttribute(B[D].cloneNode(false),C)};Object.extend(this.Element,A||{})}).call(window)};